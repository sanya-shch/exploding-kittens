"use strict";(self.webpackChunkexploding_kittens=self.webpackChunkexploding_kittens||[]).push([[936],{9936:function(e,r,t){t.r(r),t.d(r,{default:function(){return p}});var n=t(4942),a=t(1413),d=t(2982),u=t(885),o=t(2791),i=t(3014),c=t(3108),l=t(5014),s=t(68),v=t(1110),f=t(184),p=function(e){var r=e.isOpen,t=e.handleClose,p=e.cardType,m=e.cardDeck,h=e.cards,g=e.id,_=e.uuid,y=e.playerCards,k=(0,o.useRef)(null),w=(0,o.useState)([]),x=(0,u.Z)(w,2),Z=x[0],T=x[1];(0,o.useEffect)((function(){T((0,d.Z)(m))}),[m]);var b=(0,o.useState)(null),D=(0,u.Z)(b,2),C=D[0],j=D[1];function E(e){var r;return e.preventDefault&&e.preventDefault(),(null===(r=h[p])||void 0===r?void 0:r.type)===l.w.alterTheFuture&&(e.dataTransfer.dropEffect="move"),!1}function N(e){var r;if((null===(r=h[p])||void 0===r?void 0:r.type)===l.w.alterTheFuture){var t,n=null===(t=k.current)||void 0===t?void 0:t.querySelectorAll(".dnd_container .dnd_item");null===n||void 0===n||n.forEach((function(e){e.classList.remove("over")})),j(null)}}return r?(0,f.jsx)(s.Z,{wrapperId:"react-portal-card-see-the-future-modal",children:(0,f.jsx)("div",{className:"card-see-the-future-modal",ref:k,children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsx)("div",{className:"content_block dnd_container",children:Z.length&&Z.map((function(e,r){var t;return r<3&&(0,f.jsx)("div",{className:"dnd_item ".concat((null===(t=h[p])||void 0===t?void 0:t.type)===l.w.alterTheFuture?"move":""),onDragStart:function(r){return function(e){var r,t=e.e,n=e.card;(null===(r=h[p])||void 0===r?void 0:r.type)===l.w.alterTheFuture&&(j(n),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(t.target,100,100))}({e:r,card:e})},onDragOver:E,onDrop:function(r){return function(e){var r,t=e.e,n=e.card;if(t.stopPropagation&&t.stopPropagation(),(null===(r=h[p])||void 0===r?void 0:r.type)===l.w.alterTheFuture){var a=Z.findIndex((function(e){return e===n})),d=Z.findIndex((function(e){return e===C}));T((function(e){return e.reduce((function(e,r,t){return t===d?e.push(n):t===a?e.push(C):e.push(r),e}),[])}))}return!1}({e:r,card:e})},onDragEnd:N,"data-card":e,draggable:!0,children:(0,f.jsx)("img",{src:h[e].img,alt:h[e].title,width:200,height:300})},e)}))}),(0,f.jsx)("div",{className:"btn_block",children:(0,f.jsx)(v.Z,{text:"Go",onClick:function(){var e,r,d;(null===(e=h[p])||void 0===e?void 0:e.type)===l.w.alterTheFuture?(0,i.r7)((0,i.JU)(c.db,"game_rooms_kitten",g),{player_cards:(0,a.Z)((0,a.Z)({},y),{},(0,n.Z)({},_,y[_].filter((function(e){return e!==p})))),out_card_deck:(0,i.vr)(p),card_deck:Z,game_moves:(0,i.vr)({uid:_,cardType:null===(r=h[p])||void 0===r?void 0:r.type,oldCardDeck:m,newCardDeck:Z})}):(0,i.r7)((0,i.JU)(c.db,"game_rooms_kitten",g),{player_cards:(0,a.Z)((0,a.Z)({},y),{},(0,n.Z)({},_,y[_].filter((function(e){return e!==p})))),out_card_deck:(0,i.vr)(p),game_moves:(0,i.vr)({uid:_,cardType:null===(d=h[p])||void 0===d?void 0:d.type})});t()}})})]})})}):null}},68:function(e,r,t){var n=t(885),a=t(2791),d=t(4164);r.Z=function(e){var r=e.children,t=e.wrapperId,u=void 0===t?"react-portal-wrapper":t,o=(0,a.useState)(null),i=(0,n.Z)(o,2),c=i[0],l=i[1];if((0,a.useLayoutEffect)((function(){var e=document.getElementById(u),r=!1;return e||(r=!0,e=function(e){var r=document.createElement("div");return r.setAttribute("id",e),document.body.appendChild(r),r}(u)),l(e),function(){r&&e.parentNode&&e.parentNode.removeChild(e)}}),[u]),null!==c)return(0,d.createPortal)(r,c)}}}]);
//# sourceMappingURL=936.34715e67.chunk.js.map