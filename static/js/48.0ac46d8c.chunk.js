"use strict";(self.webpackChunkexploding_kittens=self.webpackChunkexploding_kittens||[]).push([[48],{7048:function(e,n,r){r.r(n),r.d(n,{default:function(){return v}});var t=r(4942),a=r(1413),c=r(2982),i=r(885),d=r(2791),o=r(3014),u=r(3108),l=r(5014),f=r(68),s=r(1110),p=r(184),v=function(e){var n=e.isOpen,r=e.handleClose,v=e.playerCards,m=e.cardDeck,_=e.cards,g=e.uuid,k=e.id,Z=e.attackCount,h=e.playersList,y=(0,d.useRef)(null),x=(0,d.useMemo)((function(){return v[g].find((function(e){return _[e].type===l.w.explodingKitten}))}),[v,_,g]),b=(0,d.useMemo)((function(){return v[g].find((function(e){return _[e].type===l.w.defuse}))}),[v,_,g]),w=(0,d.useMemo)((function(){return v[g].find((function(e){return _[e].type===l.w.impendingImplodingKitten}))}),[v,_,g]),D=(0,d.useState)([]),C=(0,i.Z)(D,2),E=C[0],I=C[1];(0,d.useEffect)((function(){x&&I([x].concat((0,c.Z)(m))),w&&I([w].concat((0,c.Z)(m)))}),[m,x,w]);var j=(0,d.useState)(null),N=(0,i.Z)(j,2),S=N[0],L=N[1];function J(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",!1}function U(e){if(S===x){var n,r=null===(n=y.current)||void 0===n?void 0:n.querySelectorAll(".dnd_container .dnd_item");null===r||void 0===r||r.forEach((function(e){e.classList.remove("over")}))}else L(null)}return n?(0,p.jsx)(f.Z,{wrapperId:"react-portal-card-put-to-deck-modal",children:(0,p.jsx)("div",{className:"card-put-to-deck-modal",ref:y,children:(0,p.jsxs)("div",{className:"modal-content",children:[(0,p.jsx)("div",{className:"content_block dnd_container",children:E.map((function(e,n){return(0,p.jsx)("div",{className:"dnd_item",onDragStart:function(n){return function(e){var n=e.e,r=e.card;r===x&&(L(r),n.dataTransfer.effectAllowed="move")}({e:n,card:e})},onDragEnter:function(n){return function(e){e.e;var n=e.card;if(S===x){var r,t=null===(r=y.current)||void 0===r?void 0:r.querySelector(".dnd_item[data-card=".concat(n,"]"));t&&t.classList.add("over")}}({e:n,card:e})},onDragOver:J,onDragLeave:function(n){return function(e){e.e;var n=e.card;if(S===x){var r,t=null===(r=y.current)||void 0===r?void 0:r.querySelector(".dnd_item[data-card=".concat(n,"]"));t&&t.classList.remove("over")}}({e:n,card:e})},onDrop:function(n){return function(e){var n=e.e,r=e.card;if(n.stopPropagation&&n.stopPropagation(),S===x){var t=E.findIndex((function(e){return e===r})),a=E.findIndex((function(e){return e===x}));I((function(e){return e.reduce((function(e,n,c){return c===a?e.push(r):c===t?e.push(x):e.push(n),e}),[])}))}return!1}({e:n,card:e})},onDragEnd:U,"data-card":e,draggable:!0,children:e===x||e===w?"X":n+1},e)}))}),(0,p.jsx)("div",{className:"btn_block",children:(0,p.jsx)(s.Z,{text:"Go",onClick:function(){if(x)if(Z>0)(0,o.r7)((0,o.JU)(u.db,"game_rooms_kitten",k),{player_cards:(0,a.Z)((0,a.Z)({},v),{},(0,t.Z)({},g,v[g].filter((function(e){return e!==b&&e!==x})))),out_card_deck:(0,o.vr)(b),card_deck:E,game_moves:[],attack_count:Z-1});else{var e=h.findIndex((function(e){return e===g}));(0,o.r7)((0,o.JU)(u.db,"game_rooms_kitten",k),{player_cards:(0,a.Z)((0,a.Z)({},v),{},(0,t.Z)({},g,v[g].filter((function(e){return e!==b&&e!==x})))),out_card_deck:(0,o.vr)(b),card_deck:E,game_moves:[],current_player_uid:e===h.length-1?h[0]:h[e+1]})}else if(w)if(Z>0)(0,o.r7)((0,o.JU)(u.db,"game_rooms_kitten",k),{player_cards:(0,a.Z)((0,a.Z)({},v),{},(0,t.Z)({},g,v[g].filter((function(e){return e!==w})))),card_deck:E,game_moves:[],is_impending_imploding_kitten:!0,attack_count:Z-1});else{var n=h.findIndex((function(e){return e===g}));(0,o.r7)((0,o.JU)(u.db,"game_rooms_kitten",k),{player_cards:(0,a.Z)((0,a.Z)({},v),{},(0,t.Z)({},g,v[g].filter((function(e){return e!==w})))),card_deck:E,game_moves:[],is_impending_imploding_kitten:!0,current_player_uid:n===h.length-1?h[0]:h[n+1]})}r()}})})]})})}):null}},68:function(e,n,r){var t=r(885),a=r(2791),c=r(4164);n.Z=function(e){var n=e.children,r=e.wrapperId,i=void 0===r?"react-portal-wrapper":r,d=(0,a.useState)(null),o=(0,t.Z)(d,2),u=o[0],l=o[1];if((0,a.useLayoutEffect)((function(){var e=document.getElementById(i),n=!1;return e||(n=!0,e=function(e){var n=document.createElement("div");return n.setAttribute("id",e),document.body.appendChild(n),n}(i)),l(e),function(){n&&e.parentNode&&e.parentNode.removeChild(e)}}),[i]),null!==u)return(0,c.createPortal)(n,u)}}}]);
//# sourceMappingURL=48.0ac46d8c.chunk.js.map