{"version":3,"file":"static/js/678.effa70ff.chunk.js","mappings":"kSA+HA,EA5GmB,SAAC,GAQb,IAPLA,EAOI,EAPJA,OACAC,EAMI,EANJA,cACAC,EAKI,EALJA,SACAC,EAII,EAJJA,KACAC,EAGI,EAHJA,GACAC,EAEI,EAFJA,eACAC,EACI,EADJA,cAEMC,GAAWC,EAAAA,EAAAA,MAETC,GAAaC,EAAAA,EAAAA,YAAWC,EAAAA,GAAxBF,SAyCFG,EAAiB,yCAAG,oGAClBC,EAAAA,EAAAA,KAAUC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,oBAAqBX,GAAK,CAChDY,kBAAkB,IAFI,wBAIlBC,EAAAA,EAAAA,KAAUH,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,oBAAqBX,IAJrB,wBAKlBS,EAAAA,EAAAA,KAAUC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,yBAA0B,cAAe,CAC/DG,OAAOC,EAAAA,EAAAA,IAAYf,KANG,2CAAH,qDAUjBgB,EAAU,yCAAG,WAAOC,GAAP,uFACXR,EAAAA,EAAAA,KAAUC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,oBAAqBX,GAAK,CAChDkB,mBAAmBC,EAAAA,EAAAA,IAAWF,GAC9BG,gBAAiBvB,EAAcwB,QAAO,SAACC,GAAD,OAAYA,EAAOL,MAAQA,CAA3B,MAHvB,2CAAH,sDAgBhB,OACE,iBAAKM,UAAU,cAAf,WACE,gBAAKA,UAAU,eAAf,gBACG1B,QADH,IACGA,OADH,EACGA,EAAe2B,KAAI,SAACF,GAAD,OAClB,SAACG,EAAA,EAAD,CAEEC,OAAQC,EAAM7B,GAAN,UAAmBA,GAAnB,OAA8BwB,EAAOM,WAAa,IAC1DC,SAAUP,EAAOO,SACjBC,KAAM/B,IAASuB,EAAOL,IACtBc,cAAe,GACfnC,OAAQA,EACRoB,WAAY,kBAAMA,EAAWM,EAAOL,IAAxB,EACZe,cAAY,GAPPV,EAAOL,IAFI,MAarBrB,GACC,iBAAK2B,UAAU,YAAf,WACE,mBAAQU,QAASzB,EAAjB,0BACA,mBAAQyB,QApFS,YACN,OAAbpC,QAAa,IAAbA,OAAA,EAAAA,EAAeqC,SAAU,EAEZ,OAAbhC,QAAa,IAAbA,GAAAA,EAAeiC,SAASC,EAAAA,EAAAA,2BAAxB,OACAlC,QADA,IACAA,GAAAA,EAAeiC,SAASC,EAAAA,EAAAA,uBADxB,OAEAlC,QAFA,IAEAA,GAAAA,EAAeiC,SAASC,EAAAA,EAAAA,wBAExBC,EAAAA,EAAAA,GAAU,CAAEnC,cAAAA,EAAeD,eAAAA,EAAgBJ,cAAAA,EAAeG,GAAAA,IAE1DK,EAAS,CACPiC,KAAM,SACNC,KAAM,+CAIVlC,EAAS,CACPiC,KAAM,SACNC,KAAM,mCAoBX,EA+CO,4BAGF,gBAAKhB,UAAU,YAAf,UACE,mBAAQU,QAhCS,WACvB,IAAMX,EAASzB,EAAc2C,MAAK,SAACC,GAAD,OAASA,EAAIxB,MAAQlB,CAArB,KAElCU,EAAAA,EAAAA,KAAUC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,oBAAqBX,GAAK,CAC1CoB,iBAAiBL,EAAAA,EAAAA,IAAYO,KAE/BnB,EAAS,IACV,EAyBO,uBAKT,C","sources":["components/StartBlock/index.js"],"sourcesContent":["import React, { useContext } from \"react\";\r\nimport {\r\n  doc,\r\n  updateDoc,\r\n  arrayUnion,\r\n  arrayRemove,\r\n  deleteDoc,\r\n} from \"firebase/firestore\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { db } from \"../../firebase\";\r\nimport * as icons from \"../../assets/icons\";\r\nimport { ToastContext } from \"../Toast\";\r\nimport { expansions } from \"../../constants/expansions\";\r\nimport { startGame } from \"../../helpers\";\r\nimport UserBlock from \"../UserBlock\";\r\n\r\nimport \"./style.scss\";\r\n\r\nconst StartBlock = ({\r\n  isHost,\r\n  playerDataArr,\r\n  iconPack,\r\n  uuid,\r\n  id,\r\n  expansionsList,\r\n  cardPacksList,\r\n}) => {\r\n  const navigate = useNavigate();\r\n\r\n  const { setToast } = useContext(ToastContext);\r\n\r\n  const handleClickStart = () => {\r\n    if (playerDataArr?.length >= 2) {\r\n      if (\r\n        cardPacksList?.includes(expansions.ExplodingKittensOriginal) ||\r\n        cardPacksList?.includes(expansions.ExplodingKittensNSFW) ||\r\n        cardPacksList?.includes(expansions.ExplodingKittensParty)\r\n      ) {\r\n        startGame({ cardPacksList, expansionsList, playerDataArr, id });\r\n      } else {\r\n        setToast({\r\n          type: \"danger\",\r\n          text: \"Select one of the game packs from the menu\",\r\n        });\r\n      }\r\n    } else {\r\n      setToast({\r\n        type: \"danger\",\r\n        text: \"At least 2 players are required\",\r\n      });\r\n\r\n      // setToast({\r\n      //   type: 'success',\r\n      //   text: 'success',\r\n      // });\r\n      // setToast({\r\n      //   type: 'danger',\r\n      //   text: 'danger',\r\n      // });\r\n      // setToast({\r\n      //   type: 'info',\r\n      //   text: 'info',\r\n      // });\r\n      // setToast({\r\n      //   type: 'none',\r\n      //   text: 'none',\r\n      // });\r\n    }\r\n  };\r\n\r\n  const handleClickDelete = async () => {\r\n    await updateDoc(doc(db, \"game_rooms_kitten\", id), {\r\n      game_room_closed: true,\r\n    });\r\n    await deleteDoc(doc(db, \"game_rooms_kitten\", id));\r\n    await updateDoc(doc(db, \"game_room_codes_kitten\", \"code_array\"), {\r\n      codes: arrayRemove(id),\r\n    });\r\n  };\r\n\r\n  const handleKick = async (uid) => {\r\n    await updateDoc(doc(db, \"game_rooms_kitten\", id), {\r\n      banned_player_uid: arrayUnion(uid),\r\n      player_data_arr: playerDataArr.filter((player) => player.uid !== uid),\r\n    });\r\n  };\r\n\r\n  const handleClickLeave = () => {\r\n    const player = playerDataArr.find((arr) => arr.uid === uuid);\r\n\r\n    updateDoc(doc(db, \"game_rooms_kitten\", id), {\r\n      player_data_arr: arrayRemove(player),\r\n    });\r\n    navigate(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"start_block\">\r\n      <div className=\"player_block\">\r\n        {playerDataArr?.map((player) => (\r\n          <UserBlock\r\n            key={player.uid}\r\n            imgSrc={icons[iconPack][`${iconPack}${player.icon_index + 1}`]}\r\n            username={player.username}\r\n            itsI={uuid === player.uid}\r\n            numberOfCards={10}\r\n            isHost={isHost}\r\n            handleKick={() => handleKick(player.uid)}\r\n            isStartBlock\r\n          />\r\n        ))}\r\n      </div>\r\n      {isHost ? (\r\n        <div className=\"btn-block\">\r\n          <button onClick={handleClickDelete}>Delete Room</button>\r\n          <button onClick={handleClickStart}>Start Game</button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"btn-block\">\r\n          <button onClick={handleClickLeave}>Leave</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StartBlock;\r\n"],"names":["isHost","playerDataArr","iconPack","uuid","id","expansionsList","cardPacksList","navigate","useNavigate","setToast","useContext","ToastContext","handleClickDelete","updateDoc","doc","db","game_room_closed","deleteDoc","codes","arrayRemove","handleKick","uid","banned_player_uid","arrayUnion","player_data_arr","filter","player","className","map","UserBlock","imgSrc","icons","icon_index","username","itsI","numberOfCards","isStartBlock","onClick","length","includes","expansions","startGame","type","text","find","arr"],"sourceRoot":""}